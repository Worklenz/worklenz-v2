<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="icon" href="./favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#2b2b2b">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <title>Worklenz</title>
    <!-- Inline critical CSS to prevent FOUC -->
    <style>
        :root {
            --light-bg: #ffffff;
            --dark-bg: #181818;
            --light-text: #181818;
            --dark-text: #ffffff;
        }

        /* Prevent any transition during initial load */
        .theme-transitioning * {
            transition: none !important;
        }

        /* Base theme styles */
        body,
        #root,
        #__next {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            transition: none;
        }

        /* Theme-specific styles */
        body.light {
            background-color: var(--light-bg);
            color: var(--light-text);
        }

        body.dark {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }

        /* Ensure theme colors persist during page transitions */
        body.light #root,
        body.light #__next {
            background-color: var(--light-bg);
        }

        body.dark #root,
        body.dark #__next {
            background-color: var(--dark-bg);
        }
    </style>
    <!-- Move script to head and make it blocking -->
    <script>
        (function () {
            try {
                const savedTheme = localStorage.getItem('theme');
                const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                const theme = savedTheme || systemTheme;

                // Add transition prevention
                document.documentElement.style.setProperty('--theme-transition-duration', '0s');

                document.documentElement.classList.add(theme);
                document.documentElement.style.colorScheme = theme;

                // Remove transition prevention after a short delay
                setTimeout(() => {
                    document.documentElement.style.removeProperty('--theme-transition-duration');
                }, 100);
            } catch (e) {
                document.documentElement.classList.add('light');
                document.documentElement.style.colorScheme = 'light';
            }
        })();
    </script>
</head>

<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="./src/index.tsx"></script>
</body>

</html>